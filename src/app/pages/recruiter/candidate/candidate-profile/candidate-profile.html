<div class="card card-flush mb-9" id="kt_user_profile_panel">
  <div class="card-header rounded-top bgi-size-cover h-200px" style="background-position: 100% 50%; background-image:url('assets/media/misc/profile-head-bg.jpg')"></div>
  <div class="card-body mt-n19">
    <div class="m-0">
      <div class="d-flex flex-stack align-items-end pb-4 mt-n19">
        <div class="symbol symbol-125px symbol-lg-150px symbol-fixed position-relative mt-n3">
          <img src="{{candidate.profile_picture}}" alt="image" class="border border-white border-4" style="border-radius: 20px" />
          <div class="position-absolute translate-middle bottom-0 start-100 ms-n1 mb-9 bg-success rounded-circle h-15px w-15px"></div>
        </div>
      </div>
      <div class="d-flex flex-stack flex-wrap align-items-end">
        <div class="d-flex flex-column">
          <div class="d-flex align-items-center mb-2">
            <a href="#" class="text-gray-800 text-hover-primary fs-2 fw-bolder me-1">{{ candidate.first_name }} {{ candidate.last_name}} ({{candidate.title}})</a>
            <a href="#" class="" data-bs-toggle="tooltip" data-bs-placement="right" title="Account is verified">
              <i class="ki-duotone ki-verify fs-1 text-primary">
                <span class="path1"></span>
                <span class="path2"></span>
              </i>
            </a>
          </div>
          <span class="fw-bold text-gray-600 fs-6 mb-2 d-block">{{ candidate.description }}</span>
          <div class="d-flex align-items-center flex-wrap fw-semibold fs-7 pe-2">
            <a href="#" class="d-flex align-items-center text-gray-500 text-hover-primary">{{ candidate.title }}</a>
            <span class="bullet bullet-dot h-5px w-5px bg-gray-500 mx-3"></span>
            <a href="#" class="d-flex align-items-center text-gray-500 text-hover-primary">{{ candidate.city }}</a>
            <span class="bullet bullet-dot h-5px w-5px bg-gray-500 mx-3"></span>
<!--            <a href="#" class="text-gray-500 text-hover-primary">3,450 Followers</a>-->
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="kt_user_profile_nav" class="rounded bg-gray-200 d-flex flex-stack flex-wrap mb-9 p-2" data-kt-sticky="true" data-kt-sticky-name="sticky-profile-navs" data-kt-sticky-offset="{default: false, lg: '200px'}" data-kt-sticky-width="{target: '#kt_user_profile_panel'}" data-kt-sticky-left="auto" data-kt-sticky-top="70px" data-kt-sticky-animation="false" data-kt-sticky-zindex="95">
  <ul class="nav flex-wrap border-transparent">
    <li class="nav-item my-1">
      <a class="btn btn-sm btn-color-gray-600 bg-state-body btn-active-color-gray-800 fw-bolder fw-bold fs-6 fs-lg-base nav-link px-3 px-lg-4 mx-1" [ngClass]="{ 'active': selectedTab === 'overview' }" (click)="selectedTab = 'overview'">Overview</a>
    </li>
    <li class="nav-item my-1">
      <a class="btn btn-sm btn-color-gray-600 bg-state-body btn-active-color-gray-800 fw-bolder fw-bold fs-6 fs-lg-base nav-link px-3 px-lg-4 mx-1" [ngClass]="{ 'active': selectedTab === 'educations' }" (click)="selectedTab = 'educations'">Educations</a>
    </li>
    <li class="nav-item my-1">
      <a class="btn btn-sm btn-color-gray-600 bg-state-body btn-active-color-gray-800 fw-bolder fw-bold fs-6 fs-lg-base nav-link px-3 px-lg-4 mx-1" [ngClass]="{ 'active': selectedTab === 'experiences' }" (click)="selectedTab = 'experiences'">Experience</a>
    </li>
    <li class="nav-item my-1">
      <a class="btn btn-sm btn-color-gray-600 bg-state-body btn-active-color-gray-800 fw-bolder fw-bold fs-6 fs-lg-base nav-link px-3 px-lg-4 mx-1" [ngClass]="{ 'active': selectedTab === 'interviews' }" (click)="selectedTab = 'interviews'">Interviews</a>
    </li>
    <li class="nav-item my-1">
      <a class="btn btn-sm btn-color-gray-600 bg-state-body btn-active-color-gray-800 fw-bolder fw-bold fs-6 fs-lg-base nav-link px-3 px-lg-4 mx-1" [ngClass]="{ 'active': selectedTab === 'notes' }" (click)="selectedTab = 'notes'">Notes</a>
    </li>
    <li class="nav-item my-1">
      <a class="btn btn-sm btn-color-gray-600 bg-state-body btn-active-color-gray-800 fw-bolder fw-bold fs-6 fs-lg-base nav-link px-3 px-lg-4 mx-1" [ngClass]="{ 'active': selectedTab === 'files' }" (click)="selectedTab = 'files'">Files</a>
    </li>
  </ul>
</div>
@if (selectedTab == 'overview') {
  <div class="row d-flex">
    <div class="col-lg-6 col-12 d-flex">
      <div class="card mb-5 mb-xl-10 flex-fill" id="kt_profile_details_view">
        <div class="card-header cursor-pointer">
          <div class="card-title m-0">
            <h3 class="fw-bold m-0">Profile Details</h3>
          </div>
        </div>
        <div class="card-body p-9">
          <div class="row mb-7">
            <label class="col-lg-4 fw-semibold text-muted">Full Name</label>
            <div class="col-lg-8">
              <span class="fw-bold fs-6 text-gray-800">{{ candidate.first_name }} {{ candidate.last_name }}</span>
            </div>
          </div>
          <div class="row mb-7">
            <label class="col-lg-4 fw-semibold text-muted">Company</label>
            <div class="col-lg-8 fv-row">
              <span class="fw-semibold text-gray-800 fs-6">Keenthemes</span>
            </div>
          </div>
          <div class="row mb-7">
            <label class="col-lg-4 fw-semibold text-muted">Phone
              <span class="ms-1" data-bs-toggle="tooltip" title="Phone number must be active">
													<i class="ki-duotone ki-information fs-7">
														<span class="path1"></span>
														<span class="path2"></span>
														<span class="path3"></span>
													</i>
												</span></label>
            <div class="col-lg-8 d-flex align-items-center">
              @if (candidate.mobile_phone) {
                <span class="fw-bold fs-6 text-gray-800 me-2">{{ candidate.mobile_phone }}</span>
                <span class="badge badge-success">Verified</span>
              }
              @else {
                <span class="fw-bold fs-6 text-gray-800 me-2">Not Provided</span>
              }
            </div>
          </div>
          <div class="row mb-7">
            <label class="col-lg-4 fw-semibold text-muted">Email</label>
            <div class="col-lg-8">
              <a href="#" class="fw-semibold fs-6 text-gray-800 text-hover-primary">{{ candidate.email }}</a>
            </div>
          </div>
          <div class="row mb-7">
            <label class="col-lg-4 fw-semibold text-muted">Address</label>
            <div class="col-lg-8">
              <span class="fw-bold fs-6 text-gray-800">{{ candidate.address1 }}</span>
            </div>
          </div>
          <div class="row mb-7">
            <label class="col-lg-4 fw-semibold text-muted">Country</label>
            <div class="col-lg-8">
              <span class="fw-bold fs-6 text-gray-800">{{ candidate.country }}</span>
            </div>
          </div>
          <div class="row mb-7">
            <label class="col-lg-4 fw-semibold text-muted">City</label>
            <div class="col-lg-8">
              <span class="fw-bold fs-6 text-gray-800">{{ candidate.city }}</span>
            </div>
          </div>
          <div class="row mb-10">
            <label class="col-lg-4 fw-semibold text-muted">Nationality</label>
            <div class="col-lg-8">
              @if (candidate.nationality) {
                <span class="fw-semibold fs-6 text-gray-800">{{ candidate.nationality }}</span>
              }
              @else {
                <span class="fw-semibold fs-6 text-gray-800">Not Provided</span>
              }
            </div>
          </div>
          <div class="notice d-flex bg-light-warning rounded border-warning border border-dashed p-6">
            <i class="ki-duotone ki-information fs-2tx text-warning me-4">
              <span class="path1"></span>
              <span class="path2"></span>
              <span class="path3"></span>
            </i>
            <div class="d-flex flex-stack flex-grow-1">
              <div class="fw-semibold">
                <h4 class="text-gray-900 fw-bold">We need your attention!</h4>
                <div class="fs-6 text-gray-700">Candidate profile is not completed. To add more details.</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-6 col-12 d-flex">
      <div class="card mb-5 mb-xl-10 flex-fill" id="kt_profile_details_view">
        <div class="card-header cursor-pointer">
          <div class="card-title m-0">
            <h3 class="fw-bold m-0">Candidate summary</h3>
          </div>
        </div>
        <div class="card-body p-9">

        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-6 col-12">
      <div class="card mb-5 mb-xl-10" id="kt_profile_details_view">
        <div class="card-header cursor-pointer">
          <div class="card-title m-0">
            <h3 class="fw-bold m-0">Skills</h3>
          </div>
        </div>
        <div class="card-body p-9">
          @for (skill of candidate.skills; let i = $index; track skill.skill_id) {
            <div class="d-flex flex-stack">
              <div class="symbol symbol-40px me-4">
                <div
                  class="symbol-label fs-2 fw-semibold"
                  [ngClass]="colorPairs[i % colorPairs.length]">
                  {{ skill.name!.at(0) }}
                </div>
              </div>
              <div class="d-flex align-items-center flex-row-fluid flex-wrap">
                <div class="flex-grow-1 me-2">
                  <a href="pages/user-profile/overview.html"
                     class="text-gray-800 text-hover-primary fs-6 fw-bold">
                    {{ skill.name }}
                  </a>
                </div>
              </div>
            </div>
            <div class="separator separator-dashed my-4"></div>
          }
        </div>
      </div>
    </div>
    <div class="col-lg-6 col-12">
      <div class="card mb-5 mb-xl-10" id="kt_profile_details_view">
        <div class="card-header cursor-pointer">
          <div class="card-title m-0">
            <h3 class="fw-bold m-0">Languages</h3>
          </div>
        </div>
        <div class="card-body p-9">
          @for (language of candidate.languages; track language.language_id) {
            <div class="row mb-7">
              <label class="col-lg-4 fw-semibold text-muted">{{language.name}}</label>
              <div class="col-lg-8">
                <span class="fw-bold fs-6 text-gray-800">{{ language.level }}</span>
              </div>
            </div>
          }
        </div>
      </div>
    </div>
  </div>
}

@else if (selectedTab == 'educations') {
  @for (education of candidate.educations; track education.education_id) {
    <div class="card mb-5 mb-xl-10" id="kt_profile_details_view">
      <div class="card-header cursor-pointer">
        <div class="card-title m-0">
          <h3 class="fw-bold m-0">{{education.school_name}}</h3>
        </div>
      </div>
      <div class="card-body p-9">
        <div class="row mb-7">
          <label class="col-lg-3 fw-semibold text-muted">Degree</label>
          <div class="col-lg-8 fv-row">
            @if (education.degree){
              <span class="fw-semibold text-gray-800 fs-6">{{ education.degree }}</span>
            } @else {
              <span class="fw-semibold text-gray-800 fs-6">Not provided</span>
            }
          </div>
        </div>
        <div class="row mb-7">
          <label class="col-lg-3 fw-semibold text-muted">Education type</label>
          <div class="col-lg-8 fv-row">
            @if (education.type) {
              <span class="fw-semibold text-gray-800 fs-6">{{ education.type }}</span>
            } @else {
              <span class="fw-semibold text-gray-800 fs-6">Not provided</span>
            }
          </div>
        </div>
        <div class="row mb-7">
          <label class="col-lg-3 fw-semibold text-muted">Location</label>
          <div class="col-lg-8 fv-row">
            @if (education.location){
              <span class="fw-semibold text-gray-800 fs-6">{{ education.location }}</span>
            } @else {
              <span class="fw-semibold text-gray-800 fs-6">Not provided</span>
            }
          </div>
        </div>
        <div class="row mb-7">
          <label class="col-lg-3 fw-semibold text-muted">Start</label>
          <div class="col-lg-8 fv-row">
            @if (education.start_date != '0'){
              <span class="fw-semibold text-gray-800 fs-6">{{ education.start_date }}</span>
            } @else {
              <span class="fw-semibold text-gray-800 fs-6">Not provided</span>
            }
          </div>
        </div>
        <div class="row mb-7">
          <label class="col-lg-3 fw-semibold text-muted">End</label>
          <div class="col-lg-8 fv-row">
            @if (education.end_date != '0'){
              <span class="fw-semibold text-gray-800 fs-6">{{ education.end_date }}</span>
            } @else {
              <span class="fw-semibold text-gray-800 fs-6">Not provided</span>
            }
          </div>
        </div>
        <div class="row mb-7">
          <label class="col-lg-3 fw-semibold text-muted">Description</label>
          <div class="col-lg-8 fv-row">
            <span class="fw-semibold text-gray-800 fs-6">{{ education.description }}</span>
          </div>
        </div>
      </div>
    </div>
  }
}

@else if (selectedTab == 'experiences') {
  @for (experience of candidate.experiences; track experience.experience_id) {
    <div class="card mb-5 mb-xl-10" id="kt_profile_details_view">
      <div class="card-header cursor-pointer">
        <div class="card-title m-0">
          <h3 class="fw-bold m-0">{{experience.company_name}}</h3>
        </div>
      </div>
      <div class="card-body p-9">
        <div class="row mb-7">
          <label class="col-lg-3 fw-semibold text-muted">Title</label>
          <div class="col-lg-8 fv-row">
            @if (experience.title){
              <span class="fw-semibold text-gray-800 fs-6">{{ experience.title }}</span>
            } @else {
              <span class="fw-semibold text-gray-800 fs-6">Not provided</span>
            }
          </div>
        </div>
        <div class="row mb-7">
          <label class="col-lg-3 fw-semibold text-muted">Location</label>
          <div class="col-lg-8 fv-row">
            @if (experience.location){
              <span class="fw-semibold text-gray-800 fs-6">{{ experience.location }}</span>
            } @else {
              <span class="fw-semibold text-gray-800 fs-6">Not provided</span>
            }
          </div>
        </div>
        <div class="row mb-7">
          <label class="col-lg-3 fw-semibold text-muted">Start</label>
          <div class="col-lg-8 fv-row">
            @if (experience.start_date != '0'){
              <span class="fw-semibold text-gray-800 fs-6">{{ experience.start_date }}</span>
            } @else {
              <span class="fw-semibold text-gray-800 fs-6">Not provided</span>
            }
          </div>
        </div>
        <div class="row mb-7">
          <label class="col-lg-3 fw-semibold text-muted">End</label>
          <div class="col-lg-8 fv-row">
            @if (experience.end_date != '0' && experience.current == 0){
              <span class="fw-semibold text-gray-800 fs-6">{{ experience.end_date }}</span>
            } @else if (experience.current){
              <span class="fw-semibold text-gray-800 fs-6">Present</span>
            }
            @else {
              <span class="fw-semibold text-gray-800 fs-6">Not provided</span>
            }
          </div>
        </div>
        <div class="row mb-7">
          <label class="col-lg-3 fw-semibold text-muted">Description</label>
          <div class="col-lg-8 fv-row">
            <span class="fw-semibold text-gray-800 fs-6">{{ experience.description }}</span>
          </div>
        </div>
      </div>
    </div>
  }
} @else if (selectedTab == 'interviews') {
  <div class="card mb-5 mb-xl-10" id="kt_profile_details_view">
    <div class="card-body p-9">
      <span class="fw-semibold text-gray-800 fs-6">No interviews have been added</span>
    </div>
  </div>

} @else if (selectedTab == 'notes') {
  <div class="card mb-5 mb-xl-10" id="kt_profile_details_view">
    <div class="card-body p-9">
      <span class="fw-semibold text-gray-800 fs-6">No notes have been added</span>
    </div>
  </div>

} @else if (selectedTab == 'files') {
  <div class="d-flex flex-wrap flex-stack my-5">
    <h3 class="fw-bold my-2">Candidate Files
      <span class="fs-6 text-gray-500 fw-semibold ms-1">+590</span></h3>
    <div class="d-flex my-2">
      <div class="d-flex align-items-center position-relative me-4">
        <i class="ki-duotone ki-magnifier fs-3 position-absolute translate-middle-y top-50 ms-4">
          <span class="path1"></span>
          <span class="path2"></span>
        </i>
        <input type="text" id="kt_filter_search" class="form-control form-control-sm form-control-solid bg-body fw-semibold fs-7 w-150px ps-11" placeholder="Search" />
      </div>
    </div>
  </div>
  <div class="row g-6 g-xl-9 mb-6 mb-xl-9">
      @for(file of candidate.files; track file.file_id){
        <div class="col-md-6 col-lg-4 col-xl-3">
          <div class="card h-100">
            <div class="card-body d-flex justify-content-center text-center flex-column p-8">
              <a href="apps/file-manager/files.html" class="text-gray-800 text-hover-primary d-flex flex-column">
                <div class="symbol symbol-60px mb-5">
                  <img src="assets/media/svg/files/pdf.svg" class="theme-light-show" alt="" />
                  <img src="assets/media/svg/files/pdf-dark.svg" class="theme-dark-show" alt="" />
                </div>
                <div class="fs-5 fw-bold mb-2">{{ file.name }}</div>
              </a>
              <div class="fs-7 fw-semibold text-gray-500">3 days ago</div>
            </div>
          </div>
        </div>
      }
  </div>
}
